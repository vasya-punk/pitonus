




<html>
	<head>
		<title>Actionscript/Javascript Test</title>
		<script src="http://clients.viget.com/blogposts/js-as/swfobject.js" type="text/javascript"></script>
		<style type="text/css">
			#form1{float:left; padding:10px;}
			#formTxt{float:left; padding:10px;}
			#form2{float:left; padding:10px;}
		    #flash{position:relative;}
		</style>
		<script>

var obj = '{"elementType":"Canvas","w":"500","h":"450","valid":true,"identifier":"CANVAS_ON_PAGE","name":"TestCanvas","backgroundImage":"bg02.jpg","backgroundStretch":"true","elements":[{"elementType":"Image","src":"demo01.png","w":"377","h":"68","marginX":"50","marginY":"30"},{"elementType":"Image","src":"demo02.png","w":"550","h":"100","marginX":"50","marginY":"150"},{"elementType":"TextBlock","header":"Интерес","text":"Интере́с — эмоциональное проявление познавательных потребностей человека. Удовлетворение интереса может привести к укреплению и развитию. Неудовлетворение интереса может привести к депрессии.Интересы бывают непосредственные, напрямую связанные с какой-либо потребностью, и опосредованные, при которых потребность прослеживается неявно.В зависимости от длительности сохранения интересы бывают устойчивые и неустойчивые. Люди с устойчивыми интересами чаще добиваются успеха в деятельности, чем личности с неустойчивыми интересами.Интересы также бывают широкими и узкими. Узкий интерес может быть направлен на совершенно конкретный объект.Иногда интересы бывают мелкими. При этом имеется в виду, что люди в основном интересуются удовлетворением естественных потребностей: в еде, в питье, в сне и других чувственных удовольствиях.Если интерес соединяется с волей, он становится склонностью.","w":"500","h":"100","marginX":"150","marginY":"250","fontColor":"0x00974B"},{"elementType":"ActiveImage","name":"new name","w":"100","h":"100","action":"DefaultCommand","caption":"LoresIpsum 1.1","src":"pic01.jpg","actionParam":"DefaultCommand param","marginX":"650","marginY":"350","inline":"true"}]}';

var newElements = '{"elements":[{"elementType":"ActiveImage","caption":"Pic1","src":"stamPic2.jpg"},{"elementType":"ActiveImage","caption":"Another pic","src":"stamPic.jpg"},{"elementType":"ActiveImage","caption":"Green Tea","src":"stamPic.jpg"}]}';

obj = obj.replace(/%22/g, "\"")
           .replace(/%5c/g, "\\")
           .replace(/%26/g, "&")
           .replace(/%25/g, "%");

var flashName = getFlashMovie('asjs');
var flashReady = false;

			
			function getFlashMovie(movieName) {
				var isIE = navigator.appName.indexOf("Microsoft") != -1;
				return (isIE) ? window[movieName] : document[movieName];
			}

			function jsPitSave(param) {
				console.log(param);
			}

			function jsPitReady( str ) {
				flashReady = true;
				console.log(str);
			}
			
			function jsConsole( str ) {
				console.log(str);
			}

			function jsPitLoadRequest(  ) {
				loadFunc('asjs',obj);
			}
			
			function jsPitSave( str ) {
					console.log(str);
			}
			
			
			
			
			function pitAddNewItem( s ) {
				console.log(s);
				sendNewItemsFunc('asjs',newElements);
			}

			function sendNewItemsFunc(flash, str) {
				getFlashMovie(flash).pitAdd(str);
	
			}
			function loadFunc(flash, str) {
				getFlashMovie(flash).pitLoad(str);
	
			}

			function traceFunc(flash, str) {
				getFlashMovie(flash).pitTrace(str);
	
			}


			
		</script>
		
	</head>
	
	<body>
		<div id="flash">
			Flash content goes here.
		</div>
		<script>
			var so = new SWFObject('testApp.swf', 'asjs', '1200', '500', '10.0.0', '#FFFFFF');
			so.write("flash");
		</script>
		

		
		
		<form action="javascript:loadFunc('asjs', obj)" id="form1">
		    <input type="submit" value="LoadTest" /> 
		</form>

		<form action="javascript:traceFunc('asjs' ,'Stam text, five centuries, but also the leap into electronic typesetting, remaining ess')" id="form1">
		    <input type="submit" value="TraceTest" /> 
		</form>

		<form style="display:none;" action="javascript:sendNewItemsFunc('asjs' ,newElements)" id="form1">
		    <input type="submit" value="NewItems" /> 
		</form>

		<script type="text/javascript">


</script>
		
	</body>
</html>